import './polyfills.server.mjs';
import{B as I,C as H,D as x,E as k,F as B,I as M,O as V,a as h,b as v,c as S,d as b,e as s,f as y,g as n,h as C,i as c,j as d,k as m,l as D,m as g,n as l,o as p,p as w,q as _,r as T,s as u,z as A}from"./chunk-4KY5KUDC.mjs";var E=(()=>{let e=class e{constructor(){this.card="",this.cardUrl="assets/cards/{{card}}.png"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=h({type:e,selectors:[["app-card"]],inputs:{card:"card"},standalone:!0,features:[u],decls:1,vars:1,consts:[[3,"src"]],template:function(r,o){r&1&&m(0,"img",0),r&2&&n("src","assets/cards/"+o.card+".png",b)},styles:["img[_ngcontent-%COMP%]{height:10rem}"]});let t=e;return t})();var f=class{reset(){this.userCards=[],this.dealerCards=[],this.userScore=0,this.dealerScore=0,this.availableCards=[...this.allCards],this.gameActive=!1}newHand(){this.userCards=[],this.dealerCards=[],this.userScore=0,this.dealerScore=0,this.gameActive=!0}constructor(){this.allCards=["2C","2D","2H","2S","3C","3D","3H","3S","4C","4D","4H","4S","5C","5D","5H","5S","6C","6D","6H","6S","7C","7D","7H","7S","8C","8D","8H","8S","9C","9D","9H","9S","10C","10D","10H","10S","JC","JD","JH","JS","QC","QD","QH","QS","KC","KD","KH","KS","AC","AD","AH","AS"],this.gameActive=!1,this.userCards=[],this.dealerCards=[],this.userScore=0,this.dealerScore=0,this.availableCards=[],this.availableCards=[...this.allCards]}getRandomCard(e){let a=Math.floor(Math.random()*this.availableCards.length),i=this.availableCards[a];this.availableCards.splice(a,1);let r=this.getCardValue(i,e);return console.log(this.availableCards.length+" cards left"),e==="user"?(this.userCards.push(i),this.userScore+=r):(this.dealerCards.push(i),this.dealerScore+=r),i}getCardValue(e,a){let i=0;i=a==="user"?this.userScore:this.dealerScore;let r=e.length===3?e.slice(0,2):e.slice(0,1);return r==="A"?i+11>21?1:11:r==="J"||r==="Q"||r==="K"?10:parseInt(r)}getCardScore(e){if(e.length===0)return 0;let a=this.userCards.pop(),i=a?.slice(0,1);return console.log("holder",a,i),console.log("player card",this.userCards),i==="A"?11+this.getCardScore(this.userCards):i==="J"||i==="Q"||i==="K"?10+this.getCardScore(this.userCards):parseInt(i?.toString()||"")+this.getCardScore(this.userCards)}};function W(t,e){if(t&1){let a=D();c(0,"div",5)(1,"button",6),g("click",function(){v(a);let r=l();return S(r.hit())}),p(2," Hit "),d(),c(3,"button",6),g("click",function(){v(a);let r=l();return S(r.stand())}),p(4," Stand "),d(),c(5,"button",7),g("click",function(){v(a);let r=l();return S(r.reset())}),p(6,"Reset"),d()()}if(t&2){let a=l();s(1),n("disabled",a.cardDataService.userScore>21),s(2),n("disabled",a.cardDataService.userScore>21)}}function j(t,e){if(t&1&&(c(0,"p"),p(1),d()),t&2){let a=l();s(1),w(a.winnerText)}}function z(t,e){if(t&1){let a=D();c(0,"button",7),g("click",function(){v(a);let r=l();return S(r.dealCards())}),p(1,"Deal Cards"),d()}}function N(t,e){if(t&1&&m(0,"app-card",11),t&2){let a=e.$implicit;n("card",a)}}function U(t,e){t&1&&m(0,"app-card",12)}function $(t,e){if(t&1&&(c(0,"div",8),C(1,N,1,1,"app-card",9)(2,U,1,0,"app-card",10),d()),t&2){let a=l();s(1),n("ngForOf",a.dealerCards),s(1),n("ngIf",a.dealerCards.length<2)}}function Y(t,e){if(t&1&&m(0,"app-card",11),t&2){let a=e.$implicit;n("card",a)}}function q(t,e){if(t&1&&(c(0,"div",8),C(1,Y,1,1,"app-card",9),d()),t&2){let a=l();s(1),n("ngForOf",a.userCards)}}var R=(()=>{let e=class e{constructor(i){this.cardDataService=i,this.userCards=[],this.dealerCards=[],this.winnerText="",this.availableCards=this.cardDataService.availableCards,this.gameActive=this.cardDataService.gameActive}dealCards(){this.winnerText="",this.userCards=[],this.dealerCards=[],console.log(this.cardDataService.availableCards.length),this.gameActive=!0,this.cardDataService.availableCards.length>10?(this.cardDataService.newHand(),this.userCards.push(this.cardDataService.getRandomCard("user")),this.dealerCards.push(this.cardDataService.getRandomCard("dealer")),this.userCards.push(this.cardDataService.getRandomCard("user"))):(this.cardDataService.reset(),this.gameActive=!1,this.availableCards=this.cardDataService.availableCards,this.dealCards())}hit(){this.userCards.push(this.cardDataService.getRandomCard("user")),console.log("on hit",this.userCards),this.cardDataService.userScore>21&&(this.winnerText="Dealer Wins!",this.gameActive=!1,this.availableCards=this.cardDataService.availableCards)}stand(){for(;this.cardDataService.dealerScore<17;)this.dealerCards.push(this.cardDataService.getRandomCard("dealer"));this.cardDataService.dealerScore>21||this.cardDataService.dealerScore<this.cardDataService.userScore?this.winnerText="You Win!":this.cardDataService.dealerScore>this.cardDataService.userScore?this.winnerText="Dealer Wins!":this.cardDataService.dealerScore===this.cardDataService.userScore&&(this.winnerText="Push!"),this.gameActive=!1,this.availableCards=this.cardDataService.availableCards}reset(){this.winnerText="",this.cardDataService.reset(),this.userCards=[],this.dealerCards=[],this.gameActive=!1,this.availableCards=this.cardDataService.availableCards}};e.\u0275fac=function(r){return new(r||e)(y(f))},e.\u0275cmp=h({type:e,selectors:[["app-board"]],standalone:!0,features:[u],decls:11,vars:8,consts:[["class","",4,"ngIf"],[4,"ngIf"],[3,"click",4,"ngIf"],[1,"text-container"],["class","card-container",4,"ngIf"],[1,""],[3,"disabled","click"],[3,"click"],[1,"card-container"],[3,"card",4,"ngFor","ngForOf"],["card","red_back",4,"ngIf"],[3,"card"],["card","red_back"]],template:function(r,o){r&1&&(c(0,"p"),p(1),d(),C(2,W,7,2,"div",0)(3,j,2,1,"p",1)(4,z,2,0,"button",2),c(5,"p",3),p(6),d(),C(7,$,3,2,"div",4),c(8,"p",3),p(9),d(),C(10,q,2,1,"div",4)),r&2&&(s(1),_("",o.availableCards.length," Total Cards in Shoe"),s(1),n("ngIf",o.userCards.length>0),s(1),n("ngIf",o.winnerText!==""),s(1),n("ngIf",o.gameActive==!1),s(2),_(" Dealer Score: ",o.cardDataService.dealerScore,`
`),s(1),n("ngIf",o.dealerCards.length>0),s(2),_("Player Score: ",o.cardDataService.userScore,""),s(1),n("ngIf",o.userCards.length>0))},dependencies:[E,x,I,H],styles:[".card-container[_ngcontent-%COMP%]{display:flex;padding:2rem;height:7.5rem}.text-container[_ngcontent-%COMP%]{font-size:large}"]});let t=e;return t})();var O=(()=>{let e=class e{constructor(){this.title="angular-blackjack"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=h({type:e,selectors:[["app-root"]],standalone:!0,features:[T([f]),u],decls:1,vars:0,template:function(r,o){r&1&&m(0,"app-board")},dependencies:[x,R]});let t=e;return t})();var J=[];var K={providers:[V(J),B()]};var G={providers:[M()]},P=A(K,G);var L=()=>k(O,P),ge=L;export{ge as a};
